#!/usr/bin/sh

SCRIPT=$(readlink -f $0)
BASEDIR=$(dirname $SCRIPT)
DOTFILESDIR=$(realpath "${BASEDIR}/..")


update_repo() {
    repourl=$(git -C $2 config --get remote.origin.url 2>/dev/null)
    ret=$?
    if [ $ret -ne 0 ] || [ $repourl != $1 ]; then
        # Not a repo / Wrong URL
        sudo rm -rf $2
        sudo git clone $1 $2
    else
        # Update instead
        sudo git -C $2 reset --hard
        sudo git -C $2 pull
    fi
}

sudo apt-get install -y git vim zsh i3 python3 python3-pip rxvt-unicode tmux curl ranger
# sudo pacman -Sy git vim zsh i3 python3 python3-pip rxvt-unicode tmux curl ranger

sudo -H pip3 install --upgrade pip
sudo -H pip3 install py3status

# git clone https://github.com/mavnn/mintty-colors-solarized.git "${DOTFILESDIR}/themes/solarized/mintty"
update_repo https://github.com/solarized/xresources.git "${DOTFILESDIR}/themes/solarized/xresources"
update_repo https://github.com/seebi/dircolors-solarized.git "${DOTFILESDIR}/themes/solarized/dircolors"

